<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Deep Dive into IPv6 Extension Header Testing</title>
<meta content="Nalini Elkins" name="author">
<meta content="Michael Ackermann" name="author">
<meta content="Dhruv Dhody" name="author">
<meta content="
       IPv6 Extension Header testing is a complex area.  Studies have shown
varying results.  This document proposes a methodology for isolating
the location and reasons for IPv6 Extension Headers blockage.  This
document outlines the basic framework and set of documents which will
follow. 
    " name="description">
<meta content="xml2rfc 3.15.1" name="generator">
<meta content="EH" name="keyword">
<meta content="draft-elkins-v6ops-eh-deepdive-fw-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.15.1
    Python 3.10.5
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    kitchen 1.2.6
    lxml 4.9.1
    MarkupSafe 2.1.1
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.4.0
    six 1.16.0
-->
<link href="draft-elkins-v6ops-eh-deepdive-fw.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl > dt {
  float: left;
  margin-right: 1em;
  min-width: 20ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
dl .break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: 14.5px;
}
.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 8em !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([stroke="fill"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Deep Dive IPv6 EH</td>
<td class="right">October 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Elkins, et al.</td>
<td class="center">Expires 24 April 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">IPv6 Operations</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-elkins-v6ops-eh-deepdive-fw-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-10-21" class="published">21 October 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Best Current Practice</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-04-24">24 April 2023</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">N. Elkins</div>
<div class="org">INT Council</div>
</div>
<div class="author">
      <div class="author-name">M. Ackermann</div>
<div class="org">INT Council</div>
</div>
<div class="author">
      <div class="author-name">D. Dhody</div>
<div class="org">India Internet Engineering Society</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Deep Dive into IPv6 Extension Header Testing</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">IPv6 Extension Header testing is a complex area.  Studies have shown
varying results.  This document proposes a methodology for isolating
the location and reasons for IPv6 Extension Headers blockage.  This
document outlines the basic framework and set of documents which will
follow.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on the
    IPv6 Operations Working Group mailing list (v6ops@ietf.org),
    which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/v6ops/">https://mailarchive.ietf.org/arch/browse/v6ops/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/dhruvdhody/draft-elkins-v6ops-eh-deepdive-fw">https://github.com/dhruvdhody/draft-elkins-v6ops-eh-deepdive-fw</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 24 April 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-problem-description" class="internal xref">Problem Description</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-fundamental-premises" class="internal xref">Fundamental Premises</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="auto internal xref">1.3</a>.  <a href="#name-diagnostic-methodology-over" class="internal xref">Diagnostic Methodology Overview</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-eh-enabled-server-client-ro" class="internal xref">EH Enabled Server / Client / Router</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-modifications-to-send-ehs-w" class="internal xref">Modifications to send EHs with application data</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-crafting-packets-with-eh-he" class="internal xref">Crafting packets with EH headers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-how-to-add-eh" class="internal xref">How to Add EH</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-which-eh-to-use" class="internal xref">Which EH to Use</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-rate-of-sending-and-samplin" class="internal xref">Rate of sending and sampling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<div id="problem-description">
<section id="section-1.1">
        <h3 id="name-problem-description">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-problem-description" class="section-name selfRef">Problem Description</a>
        </h3>
<p id="section-1.1-1">IPv6 <span>[<a href="#RFC8200" class="cite xref">RFC8200</a>]</span> Extension Headers (EHs) may be blocked at various points yet
   show the same symptom.  That is, if an EH is blocked at a router, it
   will appear to the client or measurement technique that the packet is
   dropped.  If an EH is blocked at a load balancer or CDN, the client
   will see the same symptom -- the packet is dropped.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">This is a problem because when the same symptom can be the due to
   multiple factors, incorrect conclusions may be drawn from the
   results.  That is, if, for example, loss of the sense of taste of
   sweetness can be due either to a brain tumor or a minor neurological
   problem, then if someone has a tendency towards hypochondria, they
   may incorrectly bemoan their impending death from a brain tumor when
   it may really be only a minor issue.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">This is the same for EH testing.  If a packet is seen to be dropped
   in measurement, it may only be that there is a bug in the load
   balancer code (for example) and not that EH transmission does not
   work writ large.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">This document proposes a framework to isolate the problem of where
   the packet is being dropped.  This is, however, more easily said than
   done.  There are many components and devices in a network.  Each may
   require a different isolation technique.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">We propose a methdology which starts with the simplest topology and
   grows towards more and more complex, real-world networks.  For
   example, in today's networks, if one attempts to access a well-known
   site such as Facebook.com, one is likely to access a cache server
   managed by a Content Delivery Network (CDN) rather than the origin
   server managed by Facebook.  It is important to isolate the testing
   so that we can determine the exact component which may be blocking
   the EH and why.<a href="#section-1.1-5" class="pilcrow">¶</a></p>
<p id="section-1.1-6">We additionally discuss the potential issues with the type of data
   sent as well as how the way the data is sent for testing may impact
   test results.<a href="#section-1.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="fundamental-premises">
<section id="section-1.2">
        <h3 id="name-fundamental-premises">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-fundamental-premises" class="section-name selfRef">Fundamental Premises</a>
        </h3>
<p id="section-1.2-1">Yet, there are some overriding principles.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">The blockage may be:<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-3.1">in the source network<a href="#section-1.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-3.2">in the destination network<a href="#section-1.2-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-3.3">in a transit network<a href="#section-1.2-3.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-4">Then:<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-5.1">it may be blocked intentionally<a href="#section-1.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-5.2">it may be blocked unintentionally<a href="#section-1.2-5.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-6">Intentional blocks are easier to assess.  The block is an
   administrator or network policy.  Of course, the policy may come
   about as a result of a misunderstanding of the function of EHs or
   lack of effective guidance but nonetheless, this is an understandable
   decision.<a href="#section-1.2-6" class="pilcrow">¶</a></p>
<p id="section-1.2-7">The more troubling causes of EH blocks include:<a href="#section-1.2-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-8.1">bugs<a href="#section-1.2-8.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-8.2">default configurations or policies by the vendor<a href="#section-1.2-8.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-8.3">lack of support of EH or IPv6 itself<a href="#section-1.2-8.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-9">As far as the blocking component itself (whether intentional or
   unintentional):<a href="#section-1.2-9" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-10.1">may be a router<a href="#section-1.2-10.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-10.2">may be a firewall<a href="#section-1.2-10.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-10.3">may be a load balancer<a href="#section-1.2-10.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-10.4">may be a proxy<a href="#section-1.2-10.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-10.5">may be a Host OS<a href="#section-1.2-10.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-10.6">may be a DNS or other configuration setting<a href="#section-1.2-10.6" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-11">Note: A DNS or other configuration setting may block IPv6 or prefer
   IPv4.  If not tested correctly, lack of support for IPv6 itself may
   incorrectly appear as lack of support for EHs.<a href="#section-1.2-11" class="pilcrow">¶</a></p>
<p id="section-1.2-12">Finally, the blockage or source may differ based on the type of EH.
   Some EHs are limited to an administrative domain, some EHs are
   processed at every hop, still others are from the source and
   destination.  Problem isolation techniques will differ for the
   various classes of EH.<a href="#section-1.2-12" class="pilcrow">¶</a></p>
<p id="section-1.2-13">Our final document in this series will be a BCP to indicate which EH
   should be allowed, blocked, encrypted, or authenticated and at which
   component or platform.<a href="#section-1.2-13" class="pilcrow">¶</a></p>
<p id="section-1.2-14">Note: <span>[<a href="#RFC9288" class="cite xref">RFC9288</a>]</span> "Recommendations on the Filtering of IPv6 Packets
   Containing IPv6 Extension Headers at Transit Routers" focuses on the
   IPv6 EH handling at transit routers only.  Our approach is to produce
   a final BCP with various recommendations across network segments,
   once the nature of the problems and techniques for isolation are well
   known.<a href="#section-1.2-14" class="pilcrow">¶</a></p>
</section>
</div>
<div id="diagnostic-methodology-overview">
<section id="section-1.3">
        <h3 id="name-diagnostic-methodology-over">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-diagnostic-methodology-over" class="section-name selfRef">Diagnostic Methodology Overview</a>
        </h3>
<p id="section-1.3-1">The diagnostic methodology to follow depends on what is being tested.
   For example, the problem isolation for a CDN would be different than
   the problem isolation for an internal network.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">This framework proposes the following set of documents:<a href="#section-1.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3-3.1">EH problem isolation for owned client / server<a href="#section-1.3-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.2">EH problem isolation in a network using a CDN<a href="#section-1.3-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.3">EH problem isolation in a network using a cloud provider<a href="#section-1.3-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.4">EH problem isolation for routers<a href="#section-1.3-3.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.5">EH problem isolation for load balancers<a href="#section-1.3-3.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.6">EH problem isolation for proxies<a href="#section-1.3-3.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.7">EH problem isolation for host OSs<a href="#section-1.3-3.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.8">EH problem isolation for transit networks<a href="#section-1.3-3.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.9">EH problem isolation for ISPs (multiple components / networks)<a href="#section-1.3-3.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-3.10">BCP for EH Permissions, Encryption and Authentication<a href="#section-1.3-3.10" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.3-4">Note that the server can be owned and operated by the administrator
   themselves (on-prem) <a href="#fig-serv" class="auto internal xref">Figure 1</a>, or they could hosted behind a CDN <a href="#fig-cdn" class="auto internal xref">Figure 2</a>, or
   hosted by the cloud provider <a href="#fig-cloud" class="auto internal xref">Figure 3</a>.<a href="#section-1.3-4" class="pilcrow">¶</a></p>
<span id="name-owned-client-server"></span><div id="fig-serv">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-1.3-5.1">
<pre>
                   +--------------------------+
                   |                          |
+--------+         |                          |     +---------+
| client |---------|          Internet        |-----| server  |
+--------+         |                          |     +---------+
                   |                          |
                   +--------------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-owned-client-server" class="selfRef">Owned client / server</a>
          </figcaption></figure>
</div>
<span id="name-server-behind-cdn"></span><div id="fig-cdn">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-1.3-6.1">
<pre>
                                                      +-----------------+
                   +--------------------------+     +-----------------+ |
                   |                          |     | CDN Network     | |
+--------+         |                          |     | +---------+     | |
| client |---------|        Internet          |-----| | Edge    |     | |
+--------+         |                          |     | | Server  |     | |
                   |                          |     | +---------+     | |
                   +--------------------------+     |                 | |
                                                    | (LB, Firewall   | |
                                                    |  Cache etc)     | |
                                                    |                 | |
                                                    |                 | |
                                                    |                 | |
                                                    |                 |-+
                                                    +-----------------+
                                                            |
                                                            | (*)
                                                            |
                                                       +---------+
                                                       | Origin  |
                                                       | server  |
                                                       +---------+

(*) - can be over the internet
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-server-behind-cdn" class="selfRef">Server behind CDN</a>
          </figcaption></figure>
</div>
<span id="name-cloud-hosted-server"></span><div id="fig-cloud">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-1.3-7.1">
<pre>
                   +--------------------------+     +-----------------+
                   |                          |     |                 |
+--------+         |                          |     |                 |
| client |---------|          Internet        |-----| Cloud Network   |
+--------+         |                          |     | (LB, Firewall,  |
                   |                          |     | Gateways etc)   |
                   +--------------------------+     |                 |
                                                    |                 |
                                                    |                 |
                                                    |   +---------+   |
                                                    |   | Virtual |   |
                                                    |   | server  |   |
                                                    |   +---------+   |
                                                    +-----------------+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-cloud-hosted-server" class="selfRef">Cloud-hosted server</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="eh-enabled-server-client-router">
<section id="section-2">
      <h2 id="name-eh-enabled-server-client-ro">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-eh-enabled-server-client-ro" class="section-name selfRef">EH Enabled Server / Client / Router</a>
      </h2>
<p id="section-2-1">The first step for all testing is to have a test server, client and /
   or router enabled to send EHs.  There are two basic options to do
   this, each with its own set of advantages and drawbacks.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The options fall broadly into two categories:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">Modifications to the OS / interface / socket / driver to send EHs
   with application data<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.2">Using a package which crafts EHs (multiple exist)<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-4">If crafting packets, then the question arises of which packets to
   craft.  This will be discussed in <a href="#crafting" class="auto internal xref">Section 2.2</a>.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">For either methodology, the rate of sending may influence results.
   This will be discussed in <a href="#rate" class="auto internal xref">Section 3</a>.<a href="#section-2-5" class="pilcrow">¶</a></p>
<div id="modifications-to-send-ehs-with-application-data">
<section id="section-2.1">
        <h3 id="name-modifications-to-send-ehs-w">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-modifications-to-send-ehs-w" class="section-name selfRef">Modifications to send EHs with application data</a>
        </h3>
<p id="section-2.1-1">Possibly the best way to isolate problems with EHs may be to have a
   server, client or router which has modifications to the OS,
   interface, driver or other to send real EHs with real application
   data.  This carries the initial cost of creating such modifications
   since, unfortunately, the current set of host OSs do not natively
   support this.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">The reason we find this to be the best method is because the problem
   of what packet to craft is a field which is rife with land mines.
   See <a href="#crafting" class="auto internal xref">Section 2.2</a> for a further discussion of the exact nature of the
   aforesaid land mines.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="crafting">
<section id="section-2.2">
        <h3 id="name-crafting-packets-with-eh-he">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-crafting-packets-with-eh-he" class="section-name selfRef">Crafting packets with EH headers</a>
        </h3>
<p id="section-2.2-1">A number of packages exist which can craft a packet with an EH
   header.  The more interesting and fraught problem may be which exact
   packet to craft and then which EH to craft.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">Let's discuss first the options for the type of packet to craft.
   These include:<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-3.1">A TCP packet<a href="#section-2.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-3.2">A UDP packet<a href="#section-2.2-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-3.3">An ICMPv6 packet<a href="#section-2.2-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-3.4">A QUIC packet<a href="#section-2.2-3.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-4">If crafting a TCP packet, then it is likely that some middlebox will
   drop a TCP packet which does not have the appropriate ACK and
   SEQUENCE numbers.  One may get around this problem by sending a
   packet with the SYN flag on and directed to some well-known port such
   as 443 or 80.  But, if many firewalls and other devices such as IDS /
   IPS, and even some OSs have SYN Flood protection.  So, if more than a
   certain number of these packets, say 10, in some short interval are
   sent, then they are likely to be dropped for reasons other than
   blockage of EH headers.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2-5">One may choose to use UDP, QUIC, or ICMPv6 to attempt to bypass the
   complexities of TCP.  Some enterprise networks are likely to drop UDP
   and / or QUIC.  Testing should be done without EH to make sure that
   such packets do indeed pass.<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<p id="section-2.2-6">Certainly, if you have access to all the middleboxes in your domain,
   you may be able to bypass or stop SYN Flood, UDP, ICMPv6 or other
   transport layer blocks at all the middleboxes.  But, it may be a more
   difficult effort than might be imagined.<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<p id="section-2.2-7">You may wish to test in a lab environment first to validate your
   approach.<a href="#section-2.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="how-to-add-eh">
<section id="section-2.3">
        <h3 id="name-how-to-add-eh">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-how-to-add-eh" class="section-name selfRef">How to Add EH</a>
        </h3>
<p id="section-2.3-1">There are two ways to add an EH to a packet:<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3-2.1">use a "real" EH<a href="#section-2.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.3-2.2">craft an EH<a href="#section-2.3-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.3-3">The best method may be to use an EH which is actually processed at
   the client, server, and any associated router.  This leaves us with a
   sparse set to choose from.  The problem with crafting an EH is that
   if the data is not "real", one may not be able to fault a network
   component for blocking it.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
<p id="section-2.3-4">Having said that, let's discuss crafting an EH.  An EH may be crafted
   by simply using multiple PADN options.  One should be careful not to
   use too many PADNs because then this type of header may be dropped by
   a middlebox or OS as being a flawed packet.  This is likely to
   distort the results.<a href="#section-2.3-4" class="pilcrow">¶</a></p>
<p id="section-2.3-5">An EH with all 0's or other data patterns that could be perceived as
   not "real" may also be dropped by middleboxes which are trying to be
   helpful.<a href="#section-2.3-5" class="pilcrow">¶</a></p>
<p id="section-2.3-6">It is also possible that the length of the EH may have some effect on
   what EHs get dropped and where.<a href="#section-2.3-6" class="pilcrow">¶</a></p>
<p id="section-2.3-7">You may wish to try this in a lab environment first.  If the test
   suceeds, then you may test on your network.<a href="#section-2.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="which-eh-to-use">
<section id="section-2.4">
        <h3 id="name-which-eh-to-use">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-which-eh-to-use" class="section-name selfRef">Which EH to Use</a>
        </h3>
<p id="section-2.4-1">Next, there is a consideration that the type of EH, for example,
   Destination Options, Hop-by-hop, etc. could get processed differently
   and may be dropped at different frequencies, by different devices.
   You may wish to test one at a time and note the results.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">You may wish to try this in a lab environment first.  If the test
   suceeds, then you may test on your network.<a href="#section-2.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="rate">
<section id="section-3">
      <h2 id="name-rate-of-sending-and-samplin">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-rate-of-sending-and-samplin" class="section-name selfRef">Rate of sending and sampling</a>
      </h2>
<p id="section-3-1">Whether you have chosen to send real application data or to craft
   packets, the rate of sending and sampling may create a false
   indication of blockage.  That is, if you send a great deal of data at
   frequent intervals, some middlebox in the network is likely to see
   this traffic as a Denial of Service (DoS) attack and block it.  This
   is more likely if a great many crafted packets are sent but even with
   real application data such as FTP or HTTP, overly aggressive sending
   is likely to be counterproductive.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">You may wish to send only a few packets or one or two CURL or FTPs at
   any one test.<a href="#section-3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-4">
      <h2 id="name-security-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-4-1">This document has no security considerations.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy-considerations">
<section id="section-5">
      <h2 id="name-privacy-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-5-1">This document has no privacy considerations.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-6-1">This document has no IANA actions.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC8200">[RFC8200]</dt>
      <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8200">https://www.rfc-editor.org/rfc/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC9288">[RFC9288]</dt>
      <dd>
<span class="refAuthor">Gont, F.</span> and <span class="refAuthor">W. Liu</span>, <span class="refTitle">"Recommendations on the Filtering of IPv6 Packets Containing IPv6 Extension Headers at Transit Routers"</span>, <span class="seriesInfo">RFC 9288</span>, <span class="seriesInfo">DOI 10.17487/RFC9288</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9288">https://www.rfc-editor.org/rfc/rfc9288</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgments">
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">TODO acknowledge.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="contributors">
<section id="appendix-B">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="appendix-B-1">TODO contributors.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Nalini Elkins</span></div>
<div dir="auto" class="left"><span class="org">Industry Network Technology Council</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+1%20831%20234%204232" class="tel">+1 831 234 4232</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:nalini.elkins@insidethestack.com" class="email">nalini.elkins@insidethestack.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Michael Ackermann</span></div>
<div dir="auto" class="left"><span class="org">Industry Network Technology Council</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+1%20248%20703%203600" class="tel">+1 248 703 3600</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:mackermann@bcbsm.com" class="email">mackermann@bcbsm.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://www.bcbsm.com" class="url">https://www.bcbsm.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Dhruv Dhody</span></div>
<div dir="auto" class="left"><span class="org">India Internet Engineering Society</span></div>
<div dir="auto" class="left"><span class="country-name">India</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:dhruv.ietf@gmail.com" class="email">dhruv.ietf@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
